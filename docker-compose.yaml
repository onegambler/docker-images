version: '3'
services:
  samba:
    container_name: samba
    image: dastrasmue/rpi-samba:v3
    restart: unless-stopped
    network_mode: "host"
    ports:
      - "137:137/tcp"
      - "137:137/udp"
      - "138:138/tcp"
      - "138:138/udp"
      - "139:139"
      - "445:445"
      - "445:445/udp"
    volumes:
      - /mnt/extHD/:/share/
    command: 
      -u "roberto:${ROBERTO_PASSWORD}"
      -u "jenny:${JENNY_PASSWORD}"
      -s "NAS:/share/:rw:roberto,jenny"
  deluge:
    container_name: "deluge"
    build:
      context: ./deluge
      args:
        - DELUGE_VERSION=1.3.15
        - PUID=1000
        - PGID=1000
    restart: unless-stopped
    environment:
      - TZ=Europe/London # timezone
    ports:
      - "58846:58846"
      - "8112:8112"
    volumes:
      - /mnt/extHD/raspberrypi/configs/deluge/config:/volumes/config
      - /mnt/extHD/raspberrypi/configs/deluge/torrents:/volumes/data
      - /mnt/extHD/download/complete:/volumes/complete
      - /mnt/extHD/download/incomplete/torrent:/volumes/download

  jackett:
    container_name: jackett
    image: lsioarmhf/jackett
    # build: ./jackett
    restart: unless-stopped
    environment:
      - PUID=1000 # default user id, for downloaded files access rights
      - PGID=1000 # default group id, for downloaded files access rights
      - TZ=Europe/London # timezone
    ports:
      - "9117:9117"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /mnt/extHD/download/complete:/download
      - /mnt/extHD/raspberrypi/configs/jackett:/config # config files

  sonarr:
    container_name: sonarr
    image: lsioarmhf/sonarr
    # build: ./sonarr
    restart: unless-stopped
    network_mode: host
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
    ports:
      - "8989:8989"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /mnt/extHD/raspberrypi/configs/sonarr/config:/config
      - /mnt/extHD/Roberto/media/series:/tv
      - /mnt/extHD/download/complete:/downloads
    depends_on:
      - jackett
      - deluge

  radarr:
    container_name: radarr
    image: lsioarmhf/radarr
    # build: ./radarr
    restart: unless-stopped
    network_mode: host
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
    ports:
      - "7878:7878"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /mnt/extHD/raspberrypi/configs/radarr/config:/config
      - /mnt/extHD/Roberto/media/movies:/movies
      - /mnt/extHD/download/complete:/downloads
    depends_on:
      - jackett
      - deluge